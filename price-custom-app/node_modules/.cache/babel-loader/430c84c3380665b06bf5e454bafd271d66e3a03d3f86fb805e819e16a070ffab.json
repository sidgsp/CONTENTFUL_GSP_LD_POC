{"ast":null,"code":"import React from'react';import{useEffect,useState}from'react';import{FormControl,TextInput}from'@contentful/f36-components';import{/* useCMA, */useSDK}from'@contentful/react-apps-toolkit';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Field=()=>{/*\n     To use the cma, inject it as follows.\n     If it is not needed, you can remove the next line.\n  */ // const cma = useCMA();\n// If you only want to extend Contentful's default editing experience\n// reuse Contentful's editor components\n// -> https://www.contentful.com/developers/docs/extensibility/field-editors/\nconst sdk=useSDK();const[units,setUnits]=useState();const[sku,setSku]=useState(()=>{return sdk.field.getValue()?sdk.field.getValue().sku:'';});const[originalPrice,setOriginalPrice]=useState(()=>{return sdk.field.getValue()?sdk.field.getValue().originalPrice:'';});const[markdownPrice,setMarkdownPrice]=useState(()=>{return sdk.field.getValue()?sdk.field.getValue().markdownPrice:'';});const[invalidSKU,setInvalidSKU]=useState(false);const SKU_LEN=4;useEffect(()=>{sdk.window.startAutoResizer();fetch('./prices.json',{headers:{'Accept':'application/json','Content-Type':'application/json'}}).then(res=>{return res.json();}).then(data=>{setUnits(data);}).catch(error=>{console.log(error);});if(units&&sku&&sku.length===SKU_LEN&&units[sku]){sdk.field.setValue(units[sku]);sdk.entry.save();setOriginalPrice(sdk.field.getValue().originalPrice);setMarkdownPrice(sdk.field.getValue().markdownPrice);setInvalidSKU(false);}else if(sku&&sku.length===SKU_LEN){setInvalidSKU(false);}else{setInvalidSKU(true);}},[sku]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(FormControl,{isInvalid:invalidSKU,children:[/*#__PURE__*/_jsx(FormControl.Label,{children:\"SKU\"}),/*#__PURE__*/_jsx(TextInput,{value:sku,onChange:e=>{setSku(e.target.value);},maxLength:SKU_LEN}),invalidSKU&&/*#__PURE__*/_jsx(FormControl.ValidationMessage,{children:\"Invalid SKU\"})]}),/*#__PURE__*/_jsxs(FormControl,{children:[/*#__PURE__*/_jsx(FormControl.Label,{children:\"Original Price\"}),/*#__PURE__*/_jsx(TextInput,{value:originalPrice,isDisabled:true})]}),/*#__PURE__*/_jsxs(FormControl,{children:[/*#__PURE__*/_jsx(FormControl.Label,{children:\"Markdown Price\"}),/*#__PURE__*/_jsx(TextInput,{value:markdownPrice,isDisabled:true})]})]});};export default Field;","map":{"version":3,"names":["React","useEffect","useState","FormControl","TextInput","useSDK","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Field","sdk","units","setUnits","sku","setSku","field","getValue","originalPrice","setOriginalPrice","markdownPrice","setMarkdownPrice","invalidSKU","setInvalidSKU","SKU_LEN","window","startAutoResizer","fetch","headers","then","res","json","data","catch","error","console","log","length","setValue","entry","save","children","isInvalid","Label","value","onChange","e","target","maxLength","ValidationMessage","isDisabled"],"sources":["C:/Users/Siddharth Ganti/Desktop/GSP_LD_POC/price-custom-app/src/locations/Field.jsx"],"sourcesContent":["import React from 'react';\nimport { useEffect, useState } from 'react';\nimport { FormControl, TextInput } from '@contentful/f36-components';\nimport { /* useCMA, */ useSDK } from '@contentful/react-apps-toolkit';\n\nconst Field = () => {\n  /*\n     To use the cma, inject it as follows.\n     If it is not needed, you can remove the next line.\n  */\n  // const cma = useCMA();\n  // If you only want to extend Contentful's default editing experience\n  // reuse Contentful's editor components\n  // -> https://www.contentful.com/developers/docs/extensibility/field-editors/\n  const sdk = useSDK();\n\n  const [units, setUnits] = useState();\n  const [sku, setSku] = useState(() => {\n    return sdk.field.getValue() ? sdk.field.getValue().sku : ''\n  });\n  const [originalPrice, setOriginalPrice] = useState(() => {\n    return sdk.field.getValue() ? sdk.field.getValue().originalPrice : ''\n  });\n  const [markdownPrice, setMarkdownPrice] = useState(() => {\n    return sdk.field.getValue() ? sdk.field.getValue().markdownPrice : ''\n  });\n  const [invalidSKU, setInvalidSKU] = useState(false);\n\n  const SKU_LEN = 4\n\n  useEffect(() => {\n    sdk.window.startAutoResizer();\n\n    fetch('./prices.json', {\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n    }})\n    .then((res) => {\n      return res.json();\n    })\n    .then((data) => {\n      setUnits(data);\n    })\n    .catch((error) => {\n        console.log(error);\n    });\n\n    if (units && sku && sku.length === SKU_LEN && units[sku]) {\n      sdk.field.setValue(units[sku]);\n      sdk.entry.save();\n\n      setOriginalPrice(sdk.field.getValue().originalPrice);\n      setMarkdownPrice(sdk.field.getValue().markdownPrice);\n\n      setInvalidSKU(false);\n    }\n    else if (sku && sku.length === SKU_LEN) {\n      setInvalidSKU(false);\n    }\n    else {\n      setInvalidSKU(true);\n    }\n\n  }, [sku]);\n\n  return (\n      <>\n        <FormControl isInvalid={invalidSKU}>\n          <FormControl.Label>SKU</FormControl.Label>\n            <TextInput value={sku} onChange={(e) => { setSku(e.target.value) }} maxLength={SKU_LEN} />\n            { invalidSKU && \n              <FormControl.ValidationMessage>Invalid SKU</FormControl.ValidationMessage>\n            }\n        </FormControl>\n        <FormControl>\n            <FormControl.Label>Original Price</FormControl.Label>\n            <TextInput value={originalPrice} isDisabled />\n        </FormControl>\n        <FormControl>\n            <FormControl.Label>Markdown Price</FormControl.Label>\n            <TextInput value={markdownPrice} isDisabled />\n        </FormControl>\n      </>\n  );\n};\n\nexport default Field;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,WAAW,CAAEC,SAAS,KAAQ,4BAA4B,CACnE,OAAS,aAAcC,MAAM,KAAQ,gCAAgC,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEtE,KAAM,CAAAC,KAAK,CAAGA,CAAA,GAAM,CAClB;AACF;AACA;AACA,IAHE,CAIA;AACA;AACA;AACA;AACA,KAAM,CAAAC,GAAG,CAAGR,MAAM,CAAC,CAAC,CAEpB,KAAM,CAACS,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,CAAC,CACpC,KAAM,CAACc,GAAG,CAAEC,MAAM,CAAC,CAAGf,QAAQ,CAAC,IAAM,CACnC,MAAO,CAAAW,GAAG,CAACK,KAAK,CAACC,QAAQ,CAAC,CAAC,CAAGN,GAAG,CAACK,KAAK,CAACC,QAAQ,CAAC,CAAC,CAACH,GAAG,CAAG,EAAE,CAC7D,CAAC,CAAC,CACF,KAAM,CAACI,aAAa,CAAEC,gBAAgB,CAAC,CAAGnB,QAAQ,CAAC,IAAM,CACvD,MAAO,CAAAW,GAAG,CAACK,KAAK,CAACC,QAAQ,CAAC,CAAC,CAAGN,GAAG,CAACK,KAAK,CAACC,QAAQ,CAAC,CAAC,CAACC,aAAa,CAAG,EAAE,CACvE,CAAC,CAAC,CACF,KAAM,CAACE,aAAa,CAAEC,gBAAgB,CAAC,CAAGrB,QAAQ,CAAC,IAAM,CACvD,MAAO,CAAAW,GAAG,CAACK,KAAK,CAACC,QAAQ,CAAC,CAAC,CAAGN,GAAG,CAACK,KAAK,CAACC,QAAQ,CAAC,CAAC,CAACG,aAAa,CAAG,EAAE,CACvE,CAAC,CAAC,CACF,KAAM,CAACE,UAAU,CAAEC,aAAa,CAAC,CAAGvB,QAAQ,CAAC,KAAK,CAAC,CAEnD,KAAM,CAAAwB,OAAO,CAAG,CAAC,CAEjBzB,SAAS,CAAC,IAAM,CACdY,GAAG,CAACc,MAAM,CAACC,gBAAgB,CAAC,CAAC,CAE7BC,KAAK,CAAC,eAAe,CAAE,CACrBC,OAAO,CAAE,CACP,QAAQ,CAAE,kBAAkB,CAC5B,cAAc,CAAE,kBACpB,CAAC,CAAC,CAAC,CACFC,IAAI,CAAEC,GAAG,EAAK,CACb,MAAO,CAAAA,GAAG,CAACC,IAAI,CAAC,CAAC,CACnB,CAAC,CAAC,CACDF,IAAI,CAAEG,IAAI,EAAK,CACdnB,QAAQ,CAACmB,IAAI,CAAC,CAChB,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,EAAK,CACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CACtB,CAAC,CAAC,CAEF,GAAItB,KAAK,EAAIE,GAAG,EAAIA,GAAG,CAACuB,MAAM,GAAKb,OAAO,EAAIZ,KAAK,CAACE,GAAG,CAAC,CAAE,CACxDH,GAAG,CAACK,KAAK,CAACsB,QAAQ,CAAC1B,KAAK,CAACE,GAAG,CAAC,CAAC,CAC9BH,GAAG,CAAC4B,KAAK,CAACC,IAAI,CAAC,CAAC,CAEhBrB,gBAAgB,CAACR,GAAG,CAACK,KAAK,CAACC,QAAQ,CAAC,CAAC,CAACC,aAAa,CAAC,CACpDG,gBAAgB,CAACV,GAAG,CAACK,KAAK,CAACC,QAAQ,CAAC,CAAC,CAACG,aAAa,CAAC,CAEpDG,aAAa,CAAC,KAAK,CAAC,CACtB,CAAC,IACI,IAAIT,GAAG,EAAIA,GAAG,CAACuB,MAAM,GAAKb,OAAO,CAAE,CACtCD,aAAa,CAAC,KAAK,CAAC,CACtB,CAAC,IACI,CACHA,aAAa,CAAC,IAAI,CAAC,CACrB,CAEF,CAAC,CAAE,CAACT,GAAG,CAAC,CAAC,CAET,mBACIP,KAAA,CAAAE,SAAA,EAAAgC,QAAA,eACElC,KAAA,CAACN,WAAW,EAACyC,SAAS,CAAEpB,UAAW,CAAAmB,QAAA,eACjCpC,IAAA,CAACJ,WAAW,CAAC0C,KAAK,EAAAF,QAAA,CAAC,KAAG,CAAmB,CAAC,cACxCpC,IAAA,CAACH,SAAS,EAAC0C,KAAK,CAAE9B,GAAI,CAAC+B,QAAQ,CAAGC,CAAC,EAAK,CAAE/B,MAAM,CAAC+B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,CAAC,CAAE,CAACI,SAAS,CAAExB,OAAQ,CAAE,CAAC,CACxFF,UAAU,eACVjB,IAAA,CAACJ,WAAW,CAACgD,iBAAiB,EAAAR,QAAA,CAAC,aAAW,CAA+B,CAAC,EAEnE,CAAC,cACdlC,KAAA,CAACN,WAAW,EAAAwC,QAAA,eACRpC,IAAA,CAACJ,WAAW,CAAC0C,KAAK,EAAAF,QAAA,CAAC,gBAAc,CAAmB,CAAC,cACrDpC,IAAA,CAACH,SAAS,EAAC0C,KAAK,CAAE1B,aAAc,CAACgC,UAAU,MAAE,CAAC,EACrC,CAAC,cACd3C,KAAA,CAACN,WAAW,EAAAwC,QAAA,eACRpC,IAAA,CAACJ,WAAW,CAAC0C,KAAK,EAAAF,QAAA,CAAC,gBAAc,CAAmB,CAAC,cACrDpC,IAAA,CAACH,SAAS,EAAC0C,KAAK,CAAExB,aAAc,CAAC8B,UAAU,MAAE,CAAC,EACrC,CAAC,EACd,CAAC,CAET,CAAC,CAED,cAAe,CAAAxC,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}